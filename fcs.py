
def calc_crc(crc, b):
    crc = crc ^ int(b) << 8;
    for i in range(8):
        if ((crc & 0x8000) == 0x8000):
            crc = crc << 1 ^ 0x1021
        else:
            crc = crc << 1
    return crc & 0xffff;


msg_b = [0x7E, 0x42, 0x7D, 0x5E, 0x00, 0xFD, 0x7D, 0x5D, 0x02, 0x31, 0x02, 0xC6, 0xD2, 0x7E]
msg =  [0x42, 0x7E, 0x00, 0xFD, 0x7D, 0x02, 0x31, 0x02] # 0xD2C6
#msg = [0x42, 0x7E, 0x00, 0xFD, 0x7D, 0x02, 0x5B, 0x01] # 0x0644
print "Teste de CRC"

crc = 0x0000;
for b in msg:
    crc = calc_crc(crc, b);
print hex(crc)


